import{_ as s,l as i,k as a,ae as n}from"./chunks/framework.BFFW23Ds.js";const o=JSON.parse('{"title":"Github Actions å…¥é—¨çº§æ•™ç¨‹","description":"","frontmatter":{"label":["ci/cd"]},"headers":[{"level":2,"title":"ä½¿ç”¨ Github Actions åœ¨ç§æœ‰ä»“åº“è‡ªåŠ¨æ‰“åŒ…ï¼Œå¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“","slug":"ä½¿ç”¨-github-actions-åœ¨ç§æœ‰ä»“åº“è‡ªåŠ¨æ‰“åŒ…-å¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“","link":"#ä½¿ç”¨-github-actions-åœ¨ç§æœ‰ä»“åº“è‡ªåŠ¨æ‰“åŒ…-å¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“","children":[{"level":3,"title":"æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰","slug":"æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹-ç§é’¥å’Œå…¬é’¥","link":"#æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹-ç§é’¥å’Œå…¬é’¥","children":[]},{"level":3,"title":"GitHub é…ç½®ç§˜é’¥","slug":"github-é…ç½®ç§˜é’¥","link":"#github-é…ç½®ç§˜é’¥","children":[]},{"level":3,"title":"åˆ›å»º workflow","slug":"åˆ›å»º-workflow","link":"#åˆ›å»º-workflow","children":[]}]},{"level":2,"title":"è‡ªåŠ¨å°†ä»£ç ä»“åº“å‘å¸ƒåˆ° npm ä¸Š","slug":"è‡ªåŠ¨å°†ä»£ç ä»“åº“å‘å¸ƒåˆ°-npm-ä¸Š","link":"#è‡ªåŠ¨å°†ä»£ç ä»“åº“å‘å¸ƒåˆ°-npm-ä¸Š","children":[]},{"level":2,"title":"æœ¯è¯­ï¼ˆçœ‹çœ‹å°±å¥½ï¼‰","slug":"æœ¯è¯­-çœ‹çœ‹å°±å¥½","link":"#æœ¯è¯­-çœ‹çœ‹å°±å¥½","children":[]},{"level":2,"title":"workflow æ–‡ä»¶","slug":"workflow-æ–‡ä»¶","link":"#workflow-æ–‡ä»¶","children":[]},{"level":2,"title":"ç›®æ ‡ä¸€ï¼šä½¿ç”¨ Github Actions æ‰“å°æ—¥å¿—ğŸ˜ª","slug":"ç›®æ ‡ä¸€-ä½¿ç”¨-github-actions-æ‰“å°æ—¥å¿—ğŸ˜ª","link":"#ç›®æ ‡ä¸€-ä½¿ç”¨-github-actions-æ‰“å°æ—¥å¿—ğŸ˜ª","children":[]},{"level":2,"title":"ç›®æ ‡äºŒï¼šæ¯æ¬¡ push ä»£ç åˆ° github æ—¶ï¼Œè‡ªåŠ¨æ„å»ºéƒ¨ç½² github-pagesğŸ˜€","slug":"ç›®æ ‡äºŒ-æ¯æ¬¡-push-ä»£ç åˆ°-github-æ—¶-è‡ªåŠ¨æ„å»ºéƒ¨ç½²-github-pagesğŸ˜€","link":"#ç›®æ ‡äºŒ-æ¯æ¬¡-push-ä»£ç åˆ°-github-æ—¶-è‡ªåŠ¨æ„å»ºéƒ¨ç½²-github-pagesğŸ˜€","children":[]},{"level":2,"title":"ç›®æ ‡ä¸‰ï¼šå®ç°è‡ªåŠ¨æäº¤ä»£ç ï¼Œè®© github commit ä¸€ç‰‡ç»¿ ğŸ˜…","slug":"ç›®æ ‡ä¸‰-å®ç°è‡ªåŠ¨æäº¤ä»£ç -è®©-github-commit-ä¸€ç‰‡ç»¿-ğŸ˜…","link":"#ç›®æ ‡ä¸‰-å®ç°è‡ªåŠ¨æäº¤ä»£ç -è®©-github-commit-ä¸€ç‰‡ç»¿-ğŸ˜…","children":[]},{"level":2,"title":"ç›®æ ‡å››ï¼šå®ç°è‡ªåŠ¨ç­¾åˆ°æ˜é‡‘é¢†çŸ¿çŸ³ğŸ˜‚","slug":"ç›®æ ‡å››-å®ç°è‡ªåŠ¨ç­¾åˆ°æ˜é‡‘é¢†çŸ¿çŸ³ğŸ˜‚","link":"#ç›®æ ‡å››-å®ç°è‡ªåŠ¨ç­¾åˆ°æ˜é‡‘é¢†çŸ¿çŸ³ğŸ˜‚","children":[]},{"level":2,"title":"å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„å‚è€ƒé“¾æ¥","slug":"å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„å‚è€ƒé“¾æ¥","link":"#å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„å‚è€ƒé“¾æ¥","children":[]}],"relativePath":"useful/å…¶å®ƒ/Github Actions å…¥é—¨çº§æ•™ç¨‹.md","filePath":"useful/å…¶å®ƒ/Github Actions å…¥é—¨çº§æ•™ç¨‹.md","lastUpdated":1709816942000}'),l={name:"useful/å…¶å®ƒ/Github Actions å…¥é—¨çº§æ•™ç¨‹.md"},h=n(`<h1 id="github-actions-å…¥é—¨çº§æ•™ç¨‹" tabindex="-1">Github Actions å…¥é—¨çº§æ•™ç¨‹ <a class="header-anchor" href="#github-actions-å…¥é—¨çº§æ•™ç¨‹" aria-label="Permalink to &quot;Github Actions å…¥é—¨çº§æ•™ç¨‹&quot;">â€‹</a></h1><h2 id="ä½¿ç”¨-github-actions-åœ¨ç§æœ‰ä»“åº“è‡ªåŠ¨æ‰“åŒ…-å¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“" tabindex="-1">ä½¿ç”¨ Github Actions åœ¨ç§æœ‰ä»“åº“è‡ªåŠ¨æ‰“åŒ…ï¼Œå¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“ <a class="header-anchor" href="#ä½¿ç”¨-github-actions-åœ¨ç§æœ‰ä»“åº“è‡ªåŠ¨æ‰“åŒ…-å¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“" aria-label="Permalink to &quot;ä½¿ç”¨ Github Actions åœ¨ç§æœ‰ä»“åº“è‡ªåŠ¨æ‰“åŒ…ï¼Œå¹¶éƒ¨ç½²åˆ°å…¬å…±ä»“åº“&quot;">â€‹</a></h2><h3 id="æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹-ç§é’¥å’Œå…¬é’¥" tabindex="-1">æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰ <a class="header-anchor" href="#æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹-ç§é’¥å’Œå…¬é’¥" aria-label="Permalink to &quot;æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Deploy Key&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github-deploy-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span></code></pre></div><p>è¿™ä¼šåœ¨æœ¬åœ°ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶</p><ul><li>github-deploy-key â€”â€” ç§é’¥</li><li>github-deploy-key.pub â€”â€” å…¬é’¥</li></ul><h3 id="github-é…ç½®ç§˜é’¥" tabindex="-1">GitHub é…ç½®ç§˜é’¥ <a class="header-anchor" href="#github-é…ç½®ç§˜é’¥" aria-label="Permalink to &quot;GitHub é…ç½®ç§˜é’¥&quot;">â€‹</a></h3><p>æˆ‘ä»¬æŠŠç§é’¥æ”¾åˆ°æˆ‘ä»¬ç§æœ‰çš„å­˜æ”¾åŸå§‹æ–‡ä»¶çš„ä»£ç ä»“åº“é‡Œé¢ï¼Œç”¨äºè§¦å‘ Actions æ—¶ä½¿ç”¨ã€‚</p><p>æŠŠå…¬é’¥æ”¾åˆ° GitHub Pages å¯¹åº”çš„ä»£ç ä»“åº“é‡Œé¢ï¼Œç”¨äº vitepress éƒ¨ç½²æ—¶çš„å†™å…¥å·¥ä½œã€‚</p><p><strong>é…ç½®ç§é’¥</strong></p><p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/img/2023-06-07-10-14-26.png" alt="" loading="lazy"></p><p>æ¯”æˆ‘çš„ secret åä¸º COURSE_TOKENï¼Œæ·»åŠ åçš„ç•Œé¢é•¿è¿™æ ·ï¼š</p><p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/img/2023-06-07-10-17-03.png" alt="" loading="lazy"></p><p><strong>æ·»åŠ å…¬é’¥</strong> æ¥åˆ°æˆ‘ä»¬å­˜æ”¾æ‰“åŒ…åèµ„æºçš„ä»“åº“ï¼Œé€‰æ‹© <code>settings --&gt; Deploy keys</code>ã€‚</p><p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/img/2023-06-07-10-19-41.png" alt="" loading="lazy"></p><p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/img/2023-06-07-10-21-56.png" alt="" loading="lazy"></p><h3 id="åˆ›å»º-workflow" tabindex="-1">åˆ›å»º workflow <a class="header-anchor" href="#åˆ›å»º-workflow" aria-label="Permalink to &quot;åˆ›å»º workflow&quot;">â€‹</a></h3><p>å› ä¸ºæˆ‘ä»¬æ˜¯ç§æœ‰ä»“åº“ï¼Œè¿˜éœ€è¦è®¾ç½®ä¸€é¡¹æ“ä½œã€‚åœ¨æˆ‘ä»¬ç§æœ‰ä»“åº“çš„ <code>settings --&gt; Actions/General --&gt; Access</code> éƒ¨åˆ†ï¼Œå‹¾é€‰ä¸Šä¸€ä¸ªé€‰æ‹©æ¡†ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/img/2023-06-07-10-33-27.png" alt="" loading="lazy"></p><p>æ¥ç€ï¼Œåœ¨æˆ‘ä»¬çš„ç§æœ‰ä»“åº“ä¸­åˆ›å»º <code>.github\\workflows\\build_doc.yml</code> æ–‡ä»¶ï¼Œå†™å…¥ï¼š</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark has-highlighted vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  workflow_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      pages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">write</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      id-token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">write</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      contents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">read</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # ä¸‹è½½ä»“åº“ä»£ç  / æ ¡éªŒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          fetch-depth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£… pnpm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup pnpm</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm/action-setup@v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7.17.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£… node</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup node</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;16.x&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pnpm&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£…ä¾èµ–é¡¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm i</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # è¿™é‡Œçš„ COURSE_TOKENï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨ç§æœ‰ä»“åº“è®¾ç½®çš„ç§é’¥å</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          deploy_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.COURSE_TOKEN }}</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # æ›¿æ¢ä¸ºä½ çš„å…¬å¼€ä»“åº“çš„ç”¨æˆ·åå’Œä»“åº“å</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          external_repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">keer-tea/public-course-website</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # æ›¿æ¢ä¸ºä½ çš„å…¬å¼€ä»“åº“çš„åˆ†æ”¯å</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          publish_branch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # æ›¿æ¢ä¸ºä½ çš„æ‰“åŒ…åçš„èµ„æºç›®å½•</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          publish_dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">docs/.vitepress/dist</span></span></code></pre></div><p>ä»¥åæ¨é€ä»£ç ï¼Œå°±å¯ä»¥è‡ªåŠ¨éƒ¨ç½²äº†ï¼Œè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ï¼</p><h2 id="è‡ªåŠ¨å°†ä»£ç ä»“åº“å‘å¸ƒåˆ°-npm-ä¸Š" tabindex="-1">è‡ªåŠ¨å°†ä»£ç ä»“åº“å‘å¸ƒåˆ° npm ä¸Š <a class="header-anchor" href="#è‡ªåŠ¨å°†ä»£ç ä»“åº“å‘å¸ƒåˆ°-npm-ä¸Š" aria-label="Permalink to &quot;è‡ªåŠ¨å°†ä»£ç ä»“åº“å‘å¸ƒåˆ° npm ä¸Š&quot;">â€‹</a></h2><p>é¦–å…ˆåœ¨ npm çš„ Access Tokens ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª classic tokenï¼Œå¹¶å¤åˆ¶å…¶å€¼ã€‚æˆ‘è¿™é‡Œå–åå« NPM_TOKENã€‚</p><p><img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/img/npm_token.png" alt="Alt text" loading="lazy"></p><p>ç„¶ååœ¨ github çš„ä»“åº“ä¸­ï¼Œç‚¹å‡» New reporitory secret æŒ‰é’®ï¼Œå–åä¹Ÿå« NPM_TOKENï¼Œç²˜è´´è¿›åˆšæ‰å¤åˆ¶çš„å€¼ã€‚ <img src="https://my-course-public.oss-cn-shanghai.aliyuncs.com/public/img/npm_token_github.png" alt="Alt text" loading="lazy"></p><p>ç„¶ååœ¨æºä»£ç ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª .github/workflows/npm_publish.yml æ–‡ä»¶ï¼Œå¹¶å†™å…¥ï¼š</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Publish Package to npmjs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;16.x&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          registry-url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://registry.npmjs.org&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm publish --access public</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          NODE_AUTH_TOKEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.NPM_TOKEN }}</span></span></code></pre></div><p>è¿™æ ·ä»¥åæ¨é€ä»£ç æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œ npm publish å‘½ä»¤ã€‚ä¸è¿‡æ³¨æ„ï¼Œå¦‚æœ package.json çš„ version æ²¡æœ‰æ›´æ–°ï¼Œå°†ä¼šå‘å¸ƒå¤±è´¥ã€‚</p><h2 id="æœ¯è¯­-çœ‹çœ‹å°±å¥½" tabindex="-1">æœ¯è¯­ï¼ˆçœ‹çœ‹å°±å¥½ï¼‰ <a class="header-anchor" href="#æœ¯è¯­-çœ‹çœ‹å°±å¥½" aria-label="Permalink to &quot;æœ¯è¯­ï¼ˆçœ‹çœ‹å°±å¥½ï¼‰&quot;">â€‹</a></h2><p>GitHub Actions æœ‰ä¸€äº›è‡ªå·±çš„æœ¯è¯­ã€‚</p><p>ï¼ˆ1ï¼‰workflowï¼ˆå·¥ä½œæµç¨‹ï¼‰ï¼šæŒç»­é›†æˆä¸€æ¬¡è¿è¡Œçš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ª workflowã€‚ï¼ˆä¸€ä¸ª workflow å¯¹åº”ä¸€ä¸ª.github/workflows/*.yml æ–‡ä»¶ï¼‰</p><p>ï¼ˆ2ï¼‰jobï¼ˆä»»åŠ¡ï¼‰ï¼šä¸€ä¸ª workflow ç”±ä¸€ä¸ªæˆ–å¤šä¸ª jobs æ„æˆï¼Œå«ä¹‰æ˜¯ä¸€æ¬¡æŒç»­é›†æˆçš„è¿è¡Œï¼Œå¯ä»¥å®Œæˆå¤šä¸ªä»»åŠ¡ã€‚ï¼ˆåœ¨ workflow æ–‡ä»¶é‡Œå†™ jobs å­—æ®µï¼‰</p><p>ï¼ˆ3ï¼‰stepï¼ˆæ­¥éª¤ï¼‰ï¼šæ¯ä¸ª job ç”±å¤šä¸ª step æ„æˆï¼Œä¸€æ­¥æ­¥å®Œæˆã€‚ï¼ˆåœ¨ job é‡Œå†™ step å­—æ®µï¼‰</p><p>ï¼ˆ4ï¼‰actionï¼ˆåŠ¨ä½œï¼‰ï¼šæ¯ä¸ª step å¯ä»¥ä¾æ¬¡æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤ï¼ˆactionï¼‰ã€‚ï¼ˆstep ä¸‹é¢çš„å­—æ®µï¼‰</p><h2 id="workflow-æ–‡ä»¶" tabindex="-1">workflow æ–‡ä»¶ <a class="header-anchor" href="#workflow-æ–‡ä»¶" aria-label="Permalink to &quot;workflow æ–‡ä»¶&quot;">â€‹</a></h2><p>GitHub Actions çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ä»£ç ä»“åº“çš„.github/workflows ç›®å½•ã€‚</p><p>workflow æ–‡ä»¶é‡‡ç”¨ YAML æ ¼å¼ï¼Œæ–‡ä»¶åå¯ä»¥ä»»æ„å–ï¼Œä½†æ˜¯åç¼€åç»Ÿä¸€ä¸º.ymlï¼Œæ¯”å¦‚ foo.ymlã€‚ä¸€ä¸ªåº“å¯ä»¥æœ‰å¤šä¸ª workflow æ–‡ä»¶ã€‚GitHub åªè¦å‘ç°.github/workflows ç›®å½•é‡Œé¢æœ‰.yml æ–‡ä»¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿è¡Œè¯¥æ–‡ä»¶ã€‚</p><p>workflow æ–‡ä»¶çš„é…ç½®å­—æ®µéå¸¸å¤šï¼Œè¯¦è§å®˜æ–¹æ–‡æ¡£ã€‚</p><h2 id="ç›®æ ‡ä¸€-ä½¿ç”¨-github-actions-æ‰“å°æ—¥å¿—ğŸ˜ª" tabindex="-1">ç›®æ ‡ä¸€ï¼šä½¿ç”¨ Github Actions æ‰“å°æ—¥å¿—ğŸ˜ª <a class="header-anchor" href="#ç›®æ ‡ä¸€-ä½¿ç”¨-github-actions-æ‰“å°æ—¥å¿—ğŸ˜ª" aria-label="Permalink to &quot;ç›®æ ‡ä¸€ï¼šä½¿ç”¨ Github Actions æ‰“å°æ—¥å¿—ğŸ˜ª&quot;">â€‹</a></h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>.github/workflows/suibian.yml</code>æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¯ä¸ª workflow æ–‡ä»¶çš„è¯´æ˜</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">learn-github-actions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨ push ä»£ç åè§¦å‘ jobs å·¥ä½œæµ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å·¥ä½œæµï¼ˆå·¥ä½œæµä¸­çš„æ‰€æœ‰ job ç»„åˆåœ¨ä¸€èµ·å½¢æˆäº†è¿™ä¸ª workflow æ–‡ä»¶ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ä¸€ä¸ªå·¥ä½œçš„ idï¼ˆkeyï¼‰</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  check-bats-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è¿è¡Œçš„ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä¸€ä¸ªå·¥ä½œåˆ†ä¸ºå¾ˆå¤šæ­¥éª¤ï¼ˆä¸‹é¢çš„æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ“ä½œæˆ–åˆ™è„šæœ¬ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å°†ä½ çš„ä»“åº“è¿å‡ºåˆ°è¿è¡Œå™¨ä¸Šæ“ä½œï¼Œæ¯å½“ä½ çš„å·¥ä½œå°†å¯¹ä»“åº“çš„ä»£ç æ“ä½œæ—¶ï¼Œéƒ½åº”è¯¥ä½¿ç”¨ checkout æ“ä½œã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Checkout</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£… nodeï¼Œå¯ä»¥æŒ‡å®šç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup node</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;14&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£…ä¾èµ–é¡¹ï¼ˆbats å°±æ˜¯ä¸€ä¸ª npm åŒ…ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm install -g bats</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # æŸ¥çœ‹ bats åŒ…ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Show version</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bats -v</span></span></code></pre></div><p>ç„¶åæäº¤åˆ° github ä¸Šï¼Œåœ¨<code>Actions</code>ä¸€æ é‡Œé¢å¯ä»¥çœ‹åˆ°ã€‚æ ‡çº¢çš„éƒ¨åˆ†åˆ†åˆ«ä¸ä¸Šé¢ yml æ–‡ä»¶ä¸­çš„å­—æ®µå¯¹åº”ã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58360df0c66e4def8ccadaa03899ce56~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></p><p>ç‚¹å¼€ check-bar-version å·¥ä½œï¼ŒæŸ¥çœ‹æ­¥éª¤ã€‚å¦‚æœèƒ½çœ‹åˆ°å®‰è£…åŒ…çš„ç‰ˆæœ¬ï¼Œè¯´æ˜å°±æˆåŠŸäº†ï¼</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2957ad72a5a4911b55eaff42df8292e~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></p><h2 id="ç›®æ ‡äºŒ-æ¯æ¬¡-push-ä»£ç åˆ°-github-æ—¶-è‡ªåŠ¨æ„å»ºéƒ¨ç½²-github-pagesğŸ˜€" tabindex="-1">ç›®æ ‡äºŒï¼šæ¯æ¬¡ push ä»£ç åˆ° github æ—¶ï¼Œè‡ªåŠ¨æ„å»ºéƒ¨ç½² github-pagesğŸ˜€ <a class="header-anchor" href="#ç›®æ ‡äºŒ-æ¯æ¬¡-push-ä»£ç åˆ°-github-æ—¶-è‡ªåŠ¨æ„å»ºéƒ¨ç½²-github-pagesğŸ˜€" aria-label="Permalink to &quot;ç›®æ ‡äºŒï¼šæ¯æ¬¡ push ä»£ç åˆ° github æ—¶ï¼Œè‡ªåŠ¨æ„å»ºéƒ¨ç½² github-pagesğŸ˜€&quot;">â€‹</a></h2><p>è¦å®ç°è‡ªåŠ¨æ„å»º github-pagesï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨äº† github çš„ä¸€ä¸ªå¼€æºåº“ã€‚<strong>actions-gh-pages</strong></p><p><a href="https://github.com/peaceiris/actions-gh-pages" target="_blank" rel="noreferrer">https://github.com/peaceiris/actions-gh-pages</a>.</p><p>é‡Œé¢ä¹Ÿæ¨èäº†å®˜æ–¹çš„è‡ªåŠ¨æ„å»ºéƒ¨ç½² github-pages æœåŠ¡ã€‚</p><p><a href="https://blog.csdn.net/zyu67/article/details/120072301" target="_blank" rel="noreferrer">åœ¨ä½¿ç”¨å®ƒä¹‹å‰éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª github token</a></p><p>ç„¶åæ–°å»ºä¸€ä¸ª<code>.github/workflows/buil_docs.yml</code>æ–‡ä»¶ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ nodejs é¡¹ç›®ï¼Œæ¯æ¬¡ push åˆ° master åˆ†æ”¯éƒ½æ‰“åŒ… vitepress æ–‡æ¡£ã€‚</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GitHub Actions Build and Deploy Demo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å½“ master åˆ†æ”¯ push ä»£ç çš„æ—¶å€™è§¦å‘ workflow</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # job-id:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build-and-deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">æ„å»ºå¹¶éƒ¨ç½²</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è·å–æºç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Checkout</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£… node</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup node</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;16.x&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # ç¼“å­˜ä¾èµ–é¡¹</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;npm&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®‰è£…ä¾èµ–é¡¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm i</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # æ‰“æ‰“åŒ…æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build docs</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm run docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          github_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.MY_COURSE_TOKEN }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          publish_dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">docs/.vitepress/dist</span></span></code></pre></div><p>ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œä½†æ˜¯éœ€è¦åŠ¨æ‰‹å»æ“ä½œä¸‹ï¼</p><h2 id="ç›®æ ‡ä¸‰-å®ç°è‡ªåŠ¨æäº¤ä»£ç -è®©-github-commit-ä¸€ç‰‡ç»¿-ğŸ˜…" tabindex="-1">ç›®æ ‡ä¸‰ï¼šå®ç°è‡ªåŠ¨æäº¤ä»£ç ï¼Œè®© github commit ä¸€ç‰‡ç»¿ ğŸ˜… <a class="header-anchor" href="#ç›®æ ‡ä¸‰-å®ç°è‡ªåŠ¨æäº¤ä»£ç -è®©-github-commit-ä¸€ç‰‡ç»¿-ğŸ˜…" aria-label="Permalink to &quot;ç›®æ ‡ä¸‰ï¼šå®ç°è‡ªåŠ¨æäº¤ä»£ç ï¼Œè®© github commit ä¸€ç‰‡ç»¿ ğŸ˜…&quot;">â€‹</a></h2><p>æ¯å°æ—¶çš„ 1 åˆ° 6 åˆ†é’Ÿåˆ¶åŠ¨æäº¤ä¸€æ¬¡ã€‚æ¯æ¬¡æäº¤é—´éš”ä¸èƒ½å°äº 5 åˆ†é’Ÿã€‚</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ci</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">master</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  schedule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åˆ†é’Ÿï¼Œå°æ—¶ï¼Œæ—¥ï¼Œæœˆï¼Œæ˜ŸæœŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">cron</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1,6 * * * *&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  autogreen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Clone repository</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Auto green</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          git config --local user.email &quot;lukecheng233@163.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          git config --local user.name &quot;lukecheng&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          git remote set-url origin https://\${{ github.actor }}:\${{ secrets.MY_COURSE_TOKEN }}@github.com/\${{ github.repository }}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          git pull --rebase</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          git commit --allow-empty -m &quot;a commit a day keeps your girlfriend away&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          git push</span></span></code></pre></div><h2 id="ç›®æ ‡å››-å®ç°è‡ªåŠ¨ç­¾åˆ°æ˜é‡‘é¢†çŸ¿çŸ³ğŸ˜‚" tabindex="-1">ç›®æ ‡å››ï¼šå®ç°è‡ªåŠ¨ç­¾åˆ°æ˜é‡‘é¢†çŸ¿çŸ³ğŸ˜‚ <a class="header-anchor" href="#ç›®æ ‡å››-å®ç°è‡ªåŠ¨ç­¾åˆ°æ˜é‡‘é¢†çŸ¿çŸ³ğŸ˜‚" aria-label="Permalink to &quot;ç›®æ ‡å››ï¼šå®ç°è‡ªåŠ¨ç­¾åˆ°æ˜é‡‘é¢†çŸ¿çŸ³ğŸ˜‚&quot;">â€‹</a></h2><p>ä¸“ä¸šç‰ˆæ‰æœ‰è¿™ä¸ªåŠŸèƒ½</p><h2 id="å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„å‚è€ƒé“¾æ¥" tabindex="-1">å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„å‚è€ƒé“¾æ¥ <a class="header-anchor" href="#å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„å‚è€ƒé“¾æ¥" aria-label="Permalink to &quot;å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„å‚è€ƒé“¾æ¥&quot;">â€‹</a></h2><ul><li><p><a href="https://help.github.com/en/articles/workflow-syntax-for-github-actions" target="_blank" rel="noreferrer">https://help.github.com/en/articles/workflow-syntax-for-github-actions</a> - å®˜æ–¹æ–‡æ¡£</p></li><li><p><a href="https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noreferrer">https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html</a> - é˜®ä¸€å³° GitHub Actions å…¥é—¨æ•™ç¨‹</p></li><li><p>[<a href="https://juejin.cn/post/7006524441798639653" target="_blank" rel="noreferrer">https://juejin.cn/post/7006524441798639653</a>] - (æ˜é‡‘)</p></li><li><p>[<a href="https://juejin.cn/post/7108615649777156104" target="_blank" rel="noreferrer">https://juejin.cn/post/7108615649777156104</a>] - (æ˜é‡‘)</p></li></ul>`,61),p=[h];function t(k,e,E,r,g,d){return a(),i("div",null,p)}const y=s(l,[["render",t]]);export{o as __pageData,y as default};
