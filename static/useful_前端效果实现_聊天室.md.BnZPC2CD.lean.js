import{_ as p,k as l,l as d,D as e,s as h,u as m,V as c,x as u,Q as f,R as v,q as _,ag as x,ah as y,ai as w,a9 as M,P as k}from"./chunks/framework.BFFW23Ds.js";const C={data(){return{messages:[{avatar:"#rabbit_01",message:"春光无限，冰雪消融，新年佳节，岁岁平安，欢天喜地，百事顺心，笑口常开，阖家欢乐，喜气洋洋，缘遇新友，其乐融融，生活美满。兔年大吉！",direction:"left"},{avatar:"#rabbit_02",message:"祝你兔年大吉，一如既往，二人同心，三口之家，四季欢唱，五福临门，六六顺意，七喜来财，八方鸿福，九九吉祥，十全十美。",direction:"left"},{avatar:"#rabbit_03",message:"兔年到，好运到，我的祝福先送到。一祝你今年无烦恼，二祝你出门贵人罩，三祝你兔年大吉常常微笑，万事都好！",direction:"left"},{avatar:"#rabbit_04",message:"兔年送条兔，全家乐悠悠。兔脚为你开财路，兔耳为你撞鸿运，兔背为你驮康寿，让这头兔伴你左右，永远动如蛟兔！",direction:"left"},{avatar:"#rabbit_05",message:"兔年大吉喜气扬，兔头扬扬好运来，兔眼圆圆看祥瑞，兔须翘翘钱满园，兔身摆摆业登高，兔尾扫扫体健安，兔声震震尽欢颜，祝愿兔年多财气，旺兔载运福满天！",direction:"left"},{avatar:"#rabbit_06",message:"兔年来到，福兔祝你鸿福齐天，万事如意;祥兔祝你财气冲天，好运无穷;吉兔祝你吉星高照，心想事成;灵兔祝你天天开心，福寿安康;朋友则祝你兔年如意，万事顺心！",direction:"left"}],message:"",chatBoxClass:""}},mounted(){this.chatBoxClass=`chat-box-${this._.uid}`,this.$nextTick(()=>{this.handleReceiveMsg()})},methods:{handleSendMsg(){if(!this.message)return;const a=["#rabbit_01","#rabbit_02","#rabbit_03","#rabbit_04","#rabbit_05","#rabbit_06"],i={avatar:a[Math.floor(Math.random()*a.length)],message:this.message,direction:"right"};this.messages.push(i);const n=new Event("send-message");n.key="message",n.newValue=JSON.stringify(i),this.flagMe=!0,window.dispatchEvent(n),this.flagMe=!1,this.message="",this.$nextTick(()=>{const r=document.querySelector("."+this.chatBoxClass);r.scrollTop=r.scrollHeight})},handleReceiveMsg(){window.addEventListener("send-message",a=>{if(a.key==="message"&&!this.flagMe){const s=JSON.parse(a.newValue);this.messages.push({avatar:s.avatar,message:s.message,direction:"left"}),this.$nextTick(()=>{const i=document.querySelector("."+this.chatBoxClass);i.scrollTop=i.scrollHeight})}})}}},S={class:"chat-container"},T={class:"chat-header"},B=e("span",{class:"i-twemoji:rabbit-face"},null,-1),V=e("div",{class:"avatar"},[e("div",{class:"i-twemoji:angry-face"})],-1),N={class:"message"},O=e("div",{class:"i-twemoji:smiling-face-with-heart-eyes"},null,-1);function $(a,s,i,n,r,o){return l(),d("div",S,[e("div",T,[h(" 兔年聊到（聊天室"+m(a._.uid)+"）",1),B]),e("div",{class:_(["chat-wrap",r.chatBoxClass])},[c(x,{name:"roll",mode:"in-out",appear:""},{default:u(()=>[(l(!0),d(f,null,v(r.messages,(t,b)=>(l(),d("div",{class:_(["message-box",t.direction]),key:b},[V,e("div",N,[h(m(t.message)+" ",1),O])],2))),128))]),_:1})],2),e("div",{class:"input-box",onKeyup:s[2]||(s[2]=M((...t)=>o.handleSendMsg&&o.handleSendMsg(...t),["enter"]))},[y(e("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=t=>r.message=t)},null,512),[[w,r.message]]),e("button",{class:"send-btn",onClick:s[1]||(s[1]=(...t)=>o.handleSendMsg&&o.handleSendMsg(...t))},"发送")],32)])}const g=p(C,[["render",$]]),j=e("h1",{id:"聊天室",tabindex:"-1"},[h("聊天室 "),e("a",{class:"header-anchor",href:"#聊天室","aria-label":'Permalink to "聊天室"'},"​")],-1),D={class:"flex mt-30px lt-md:flex-col"},E={class:"h-500px border border-gray border-solid rounded-8px md:mr-10px"},P={class:"h-500px border border-gray border-solid rounded-8px lt-md:mt-30px"},R=JSON.parse('{"title":"聊天室","description":"","frontmatter":{"label":["actual combat"]},"headers":[],"relativePath":"useful/前端效果实现/聊天室.md","filePath":"useful/前端效果实现/聊天室.md","lastUpdated":1709394628000}'),q={name:"useful/前端效果实现/聊天室.md"},H=Object.assign(q,{setup(a){return(s,i)=>{const n=k("ClientOnly");return l(),d("div",null,[j,c(n,null,{default:u(()=>[e("div",D,[e("div",E,[c(g)]),e("div",P,[c(g)])])]),_:1})])}}});export{R as __pageData,H as default};
