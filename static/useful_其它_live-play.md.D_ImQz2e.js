import{_ as e,l as i,k as a,ae as l}from"./chunks/framework.BFFW23Ds.js";const g=JSON.parse('{"title":"直播","description":"","frontmatter":{"label":["live"]},"headers":[{"level":2,"title":"关于直播技术的几个问题","slug":"关于直播技术的几个问题","link":"#关于直播技术的几个问题","children":[]},{"level":2,"title":"小程序直播 demo","slug":"小程序直播-demo","link":"#小程序直播-demo","children":[]},{"level":2,"title":"uniapp 直播 demo","slug":"uniapp-直播-demo","link":"#uniapp-直播-demo","children":[]},{"level":2,"title":"搭建一个简单的直播网站","slug":"搭建一个简单的直播网站","link":"#搭建一个简单的直播网站","children":[]},{"level":2,"title":"小程序实时音视频云 sdk","slug":"小程序实时音视频云-sdk","link":"#小程序实时音视频云-sdk","children":[]},{"level":2,"title":"七牛直播操作手册","slug":"七牛直播操作手册","link":"#七牛直播操作手册","children":[{"level":3,"title":"MCN 主播如何开直播间","slug":"mcn-主播如何开直播间","link":"#mcn-主播如何开直播间","children":[]},{"level":3,"title":"如何通知消费者打开直播间观看","slug":"如何通知消费者打开直播间观看","link":"#如何通知消费者打开直播间观看","children":[]}]},{"level":2,"title":"直播开发学习链接","slug":"直播开发学习链接","link":"#直播开发学习链接","children":[]}],"relativePath":"useful/其它/live-play.md","filePath":"useful/其它/live-play.md","lastUpdated":1709816942000}'),s={name:"useful/其它/live-play.md"},t=l(`<h1 id="直播" tabindex="-1">直播 <a class="header-anchor" href="#直播" aria-label="Permalink to &quot;直播&quot;">​</a></h1><h2 id="关于直播技术的几个问题" tabindex="-1">关于直播技术的几个问题 <a class="header-anchor" href="#关于直播技术的几个问题" aria-label="Permalink to &quot;关于直播技术的几个问题&quot;">​</a></h2><p>流媒体协议的作用就是将在网络上传输的音视频数据解析为响应的视频封装格式。</p><p>流媒体协议能携带的视频封装格式除了 AVI，其它格式都可以。</p><p>视频文件的后缀，比如.avi .mp4 等代表不同的封装格式。封装格式就是将视频和音频数据按照一定方式放在一起。</p><p>有些封装格式只支持一种音视频编码格式，有些封装格式支持多种音视频编码格式。</p><h2 id="小程序直播-demo" tabindex="-1">小程序直播 demo <a class="header-anchor" href="#小程序直播-demo" aria-label="Permalink to &quot;小程序直播 demo&quot;">​</a></h2><p>具体文档[<a href="https://developer.qiniu.com/pili/4211/small-program-live-access-to-documents" target="_blank" rel="noreferrer">https://developer.qiniu.com/pili/4211/small-program-live-access-to-documents</a>]</p><ol><li><p>注册认证账号</p></li><li><p>下载直播小程序 demo[<a href="https://github.com/pili-engineering/wxapp-live-demo" target="_blank" rel="noreferrer">https://github.com/pili-engineering/wxapp-live-demo</a>]</p></li><li><p>在<a href="https://portal.qiniu.com/home" target="_blank" rel="noreferrer">七牛开发者平台首页</a>定位到 资源管理 &gt; 直播空间 资源卡片，点击创建直播流 <img src="https://dn-odum9helk.qbox.me/FkjcHcu-caXemFVGVeJYs8MuC2Tz"></p></li><li><p>(直播域名可以随便填) 填写直播空间信息，然后按照步骤创建直播空间。 <img src="https://static01.imgkr.com/temp/5f74f44f78d3482680cdb562a490ea45.png"></p></li><li><p>更改后端参数 <img src="https://sdk-release.qnsdk.com/1545722811576.jpg"></p></li></ol><p>注意点：</p><ol><li>server 目录下的 index.js 修改，否则可能连接不成功。然后先<code>mongod</code>，开启数据库。再<code>node index.js</code></li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//                mongodb://mongo:27017</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mongoose.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mongodb://127.0.0.1:27017/piliwechat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,err,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);});</span></span></code></pre></div><h2 id="uniapp-直播-demo" tabindex="-1">uniapp 直播 demo <a class="header-anchor" href="#uniapp-直播-demo" aria-label="Permalink to &quot;uniapp 直播 demo&quot;">​</a></h2><p>==注意==</p><ol><li>测试账号不支持使用直播功能，只有符合条件的 appid 才可以，具体要求请参考：<a href="https://developers.weixin.qq.com/miniprogram/dev/component/live-player.html" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/component/live-player.html</a></li><li>live-pusher 只支持 nvue 页面</li></ol><h2 id="搭建一个简单的直播网站" tabindex="-1">搭建一个简单的直播网站 <a class="header-anchor" href="#搭建一个简单的直播网站" aria-label="Permalink to &quot;搭建一个简单的直播网站&quot;">​</a></h2><p><a href="https://developer.aliyun.com/article/706488" target="_blank" rel="noreferrer">https://developer.aliyun.com/article/706488</a></p><h2 id="小程序实时音视频云-sdk" tabindex="-1">小程序实时音视频云 sdk <a class="header-anchor" href="#小程序实时音视频云-sdk" aria-label="Permalink to &quot;小程序实时音视频云 sdk&quot;">​</a></h2><p>微信小程序接入实时音视频 RTC 产品参考这个文档：<a href="https://doc.qnsdk.com/rtn/wxapp/docs/overview.html" target="_blank" rel="noreferrer">https://doc.qnsdk.com/rtn/wxapp/docs/overview.html</a></p><ul><li>完成了七牛实时音视频云接入流程 (<a href="https://doc.qnsdk.com/rtn/docs/rtn_startup" target="_blank" rel="noreferrer">https://doc.qnsdk.com/rtn/docs/rtn_startup</a>)</li><li>请在微信小程序后台 -&gt; 开发 -&gt; 开发设置 -&gt; 服务器域名配置中，将 wss://rtmpgate.cloudvdn.com 加到 socket 合法域名中，将 <a href="https://pili-rtc-qos.qiniuapi.com" target="_blank" rel="noreferrer">https://pili-rtc-qos.qiniuapi.com</a> 添加到 request 合法域名中。</li><li>在小程序的开发后台打开实时播放音视频流、实时录制音视频流的开关（小程序后台 -&gt; 开发 -&gt; 接口设置）(==两个都显示未符合开通条件，需要在小程序后台添加相应服务类目)[例如 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/live-player.html" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/component/live-player.html</a>]</li></ul><blockquote><p>为什么组件不能正常显示？为什么出现黑屏问题？用户已经存在什么意思？</p></blockquote><h2 id="七牛直播操作手册" tabindex="-1">七牛直播操作手册 <a class="header-anchor" href="#七牛直播操作手册" aria-label="Permalink to &quot;七牛直播操作手册&quot;">​</a></h2><h3 id="mcn-主播如何开直播间" tabindex="-1">MCN 主播如何开直播间 <a class="header-anchor" href="#mcn-主播如何开直播间" aria-label="Permalink to &quot;MCN 主播如何开直播间&quot;">​</a></h3><ol><li><p>使用谷歌浏览器，打开地址<code>https://live.youinsh.com/livestream/qiniulogin</code>。可能需要注册登陆。</p></li><li><p>点击新建直播</p><p>下面对直播设置做出解释：</p><ul><li><p>直播名称：直播的房间名字</p></li><li><p>直播时间：。。。</p></li><li><p>直播类型：有横屏直播和竖屏直播两种方式。感觉竖屏直播更类似淘宝抖音的带货直播。创建后就无法再修改直播类型了，只能另开一个直播间。</p></li><li><p>直播方式</p><p><code>直播类型</code>为横屏直播时，<code>直播方式</code>不能选择手机直播。<code>直播类型</code>为<code>竖屏直播</code>时，不能选择单人网页直播、连麦直播。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">单人网页直播：一个人使用谷歌浏览器就可以直播。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">连麦直播：场景为将多个用户的直播画面放在一个屏幕上。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">推流直播：自己使用第三方推流软件直播。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">定时推流直播：将录制好的视频，设置到时间后开始直播。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">拉流直播：拉取服务器已有的直播内容</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">手机直播：适用于竖屏带货直播场景。使用指定的</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> APP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 直播，支持聊天互动、商品管理。扫码下载连接：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		https://qncdn.youinsh.cn/saas_pro/publicFile/image/appDownloadQRcode.png</span></span></code></pre></div></li><li><p>封面图</p><p>未点进直播间的直播封面图</p></li><li><p>微信分享缩略图</p><p>分享至微信时带的图片</p></li><li><p>是否公开</p><p>在您的企业门户页面，显示本场直播。（企业门户是什么？？）</p></li><li><p>指定讲师</p><p>本场直播也会出现在指定的讲师（主播）的后台首页，讲师也能进行直播。</p></li></ul></li><li><p>直播测试</p><p>直播类型选择竖屏直播；直播方式选择手机直播（需要下载 app，<a href="https://qncdn.youinsh.cn/saas_pro/publicFile/image/appDownloadQRcode.png%EF%BC%89%EF%BC%9B%E6%9C%80%E5%90%8E%E5%88%B0%E6%89%8B%E6%9C%BA" target="_blank" rel="noreferrer">https://qncdn.youinsh.cn/saas_pro/publicFile/image/appDownloadQRcode.png）；最后到手机</a> app 有因中开启直播</p></li></ol><h3 id="如何通知消费者打开直播间观看" tabindex="-1">如何通知消费者打开直播间观看 <a class="header-anchor" href="#如何通知消费者打开直播间观看" aria-label="Permalink to &quot;如何通知消费者打开直播间观看&quot;">​</a></h3><p>方式一：直播开播后，在后台会生成一个观看链接。观众点击这个链接就可以打开直播间观看。</p><p>方式二：多平台同步直播，将本场直播推流到第三方平台同步播出，如视频号、bilibili 等</p><h2 id="直播开发学习链接" tabindex="-1">直播开发学习链接 <a class="header-anchor" href="#直播开发学习链接" aria-label="Permalink to &quot;直播开发学习链接&quot;">​</a></h2><ul><li>obs+node-media-server+flv.js 实现录播和直播[<a href="https://www.jianshu.com/p/d6cd56d31bf2" target="_blank" rel="noreferrer">https://www.jianshu.com/p/d6cd56d31bf2</a>]</li><li>前端实现直播功能[<a href="https://blog.csdn.net/CSDNzhaojiale/article/details/118571451" target="_blank" rel="noreferrer">https://blog.csdn.net/CSDNzhaojiale/article/details/118571451</a>]</li></ul>`,29),n=[t];function p(r,o,h,d,c,k){return a(),i("div",null,n)}const u=e(s,[["render",p]]);export{g as __pageData,u as default};
