import{j as q,r as L,K as P,k as C,l as B,Q as x,R as T,D as t,q as S,ac as O,u as _,V as o,x as b,s as R,ae as A,P as V}from"./chunks/framework.BFFW23Ds.js";const $=t("canvas",{id:"three-composite",width:"200",height:"200"},null,-1),N=t("div",{class:"font-bold text-fuchsia-600"},"合成模式：",-1),X={class:"flex items-start"},Y={class:"w-30% flex-shrink-0 self-unset"},j={class:"w-full pt-full relative"},U=["id"],H={class:"flex items-end"},G=["checked","onChange"],z={class:"ml-5px leading-none"},J={class:"ml-20px mt-5px"},K=q({__name:"three-composite-demo",setup(D){const a=[["source-in",{desc:"新图形只在新图形和目标画布重叠的地方绘制。其他的都是透明的。"}],["source-over",{desc:"这是默认设置，并在现有画布上下文之上绘制新图形。"}],["source-out",{desc:"在不与现有画布内容重叠的地方绘制新图形。"}],["source-atop",{desc:"新图形只在与现有画布内容重叠的地方绘制。"}],["destination-over",{desc:"在现有的画布内容后面绘制新的图形。"}],["destination-in",{desc:"现有的画布内容保持在新图形和现有画布内容重叠的位置。其他的都是透明的。"}],["destination-out",{desc:"现有内容保持在新图形不重叠的地方。"}],["destination-atop",{desc:"现有的画布只保留与新图形重叠的部分，新的图形是在画布内容后面绘制的。"}],["lighter",{desc:"两个重叠图形的颜色是通过颜色值相加来确定的。"}],["copy",{desc:"只显示新图形。"}],["xor",{desc:"图像中，那些重叠和正常绘制之外的其他地方是透明的。"}],["multiply",{desc:"将顶层像素与底层相应像素相乘，结果是一幅更黑暗的图片。"}],["screen",{desc:"像素被倒转，相乘，再倒转，结果是一幅更明亮的图片。"}],["overlay",{desc:"multiply 和 screen 的结合，原本暗的地方更暗，原本亮的地方更亮。"}],["darken",{desc:"保留两个图层中最暗的像素。"}],["lighten",{desc:"保留两个图层中最亮的像素。"}],["color-dodge",{desc:"将底层除以顶层的反置。"}],["color-burn",{desc:"将反置的底层除以顶层，然后将结果反过来。"}],["hard-light",{desc:"屏幕相乘（A combination of multiply and screen）类似于叠加，但上下图层互换了。"}],["soft-light",{desc:"用顶层减去底层或者相反来得到一个正值。"}],["difference",{desc:"一个柔和版本的强光（hard-light）。纯黑或纯白不会导致纯黑或纯白。"}],["exclusion",{desc:"和 difference 相似，但对比度较低。"}],["hue",{desc:"保留了底层的亮度（luma）和色度（chroma），同时采用了顶层的色调（hue）。"}],["saturation",{desc:"保留底层的亮度（luma）和色调（hue），同时采用顶层的色度（chroma）。"}],["color",{desc:"保留了底层的亮度（luma），同时采用了顶层的色调 (hue) 和色度 (chroma)。"}],["luminosity",{desc:"保持底层的色调（hue）和色度（chroma），同时采用顶层的亮度（luma）。"}]],h=L(0);function d(k){h.value=k;const p=a[h.value][0];r(p,F)}let F;function r(k,p){const l=document.createElement("canvas");l.width=200,l.height=200;const s=l.getContext("2d");s.clearRect(-100,100,200,200),s.fillStyle="rgba(0,0,0, 0.3)",s.fillRect(0,0,200,200),s.translate(100,100),s.globalCompositeOperation=k,s.beginPath(),s.fillStyle="red",s.arc(30,0,50,0,2*Math.PI),s.fill(),s.closePath(),s.beginPath(),s.fillStyle="green",s.arc(-30,0,50,0,2*Math.PI),s.fill(),s.closePath(),s.beginPath(),s.fillStyle="blue",s.arc(0,-30,50,0,2*Math.PI),s.fill(),s.closePath(),p.clearRect(0,0,200,200),p.drawImage(l,0,0,200,200)}return P(()=>{F=document.getElementById("three-composite").getContext("2d"),r(a[h.value][0],F);for(const k of a){const p=k[0],l=document.getElementById(`test-canvas-${p}`).getContext("2d");r(p,l)}}),(k,p)=>(C(),B(x,null,[$,N,(C(),B(x,null,T(a,(l,s)=>t("div",X,[t("div",Y,[t("div",j,[t("canvas",{id:"test-canvas-"+l[0],width:"200",height:"200",class:"w-full h-full absolute top-0 left-0 border-dark-50 border-.5 border-solid"},null,8,U)])]),t("label",{class:S(["ml-10px flex flex-col",h.value===s?"text-red":""])},[t("div",H,[t("input",{type:"radio",name:"go",checked:h.value===s,onChange:O(u=>d(s),["stop"])},null,40,G),t("div",z,_(l[0]),1)]),t("div",J,_(l[1].desc),1)],2)])),64))],64))}}),Q={id:"card"},W=t("canvas",{id:"scratch-ticket",width:"200",height:"200"},null,-1),Z=[W],ss=q({__name:"scratch-ticket",setup(D){return P(()=>{const a=document.getElementById("scratch-ticket"),h=a.getContext("2d"),d=200,F=200;let r,k;a.addEventListener("mousedown",f,!1),a.addEventListener("mousemove",v,!1),a.addEventListener("mouseup",m,!1),a.addEventListener("touchstart",f,!1),a.addEventListener("touchmove",v,!1),a.addEventListener("touchend",m,!1);function p(){let i=h.getImageData(0,0,d,F).data,g=i.length,y=g/32,e=0;for(let E=0;E<g;E+=32)i[E]===0&&e++;return Math.round(e/y*100)}function l(n,i){return Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2))}function s(n,i){return Math.atan2(i.x-n.x,i.y-n.y)}function u(n,i){var g=0,y=0,e,E;if(i.offsetParent!==void 0)do g+=i.offsetLeft,y+=i.offsetTop;while(i=i.offsetParent);return e=(n.pageX||n.touches[0].pageX)-g,E=(n.pageY||n.touches[0].pageY)-y,{x:e,y:E}}function w(n){var i;n=n||0,n>80&&((i=a==null?void 0:a.parentNode)==null||i.removeChild(a))}function f(n){r=!0,k=u(n,a)}function v(n){if(n.preventDefault(),!r)return;let i=u(n,a);const g=l(k,i),y=s(k,i);let e,E;for(let c=0;c<g;c++){e=k.x+Math.sin(y)*c*2,E=i.y+Math.cos(y)*c*2,h.globalCompositeOperation="destination-out";const M=8;h.beginPath(),h.arc(e,E,M,0,Math.PI*2,!0),h.closePath(),h.fill()}k=i,w(p())}function m(){r=!1}function I(){h.save(),h.fillStyle="#ddd",h.fillRect(0,0,d,F),h.restore()}I()}),(a,h)=>(C(),B("div",Q,Z))}}),is=A("",5),as=A("",2),ns=A("",5),ls=JSON.parse('{"title":"canvas 合成","description":"","frontmatter":{"label":"canvas"},"headers":[{"level":2,"title":"globalCompositeOperation","slug":"globalcompositeoperation","link":"#globalcompositeoperation","children":[]},{"level":2,"title":"合成三个图形","slug":"合成三个图形","link":"#合成三个图形","children":[]},{"level":2,"title":"刮刮乐 1","slug":"刮刮乐-1","link":"#刮刮乐-1","children":[]},{"level":2,"title":"刮刮乐 2","slug":"刮刮乐-2","link":"#刮刮乐-2","children":[]}],"relativePath":"useful/canvas/05 canvas 合成.md","filePath":"useful/canvas/05 canvas 合成.md","lastUpdated":1710946996000}'),hs={name:"useful/canvas/05 canvas 合成.md"},ts=Object.assign(hs,{setup(D){return(a,h)=>{const d=V("clientOnly");return C(),B("div",null,[is,o(d,null,{default:b(()=>[o(K)]),_:1}),R(" 代码： "),as,o(d,null,{default:b(()=>[o(ss)]),_:1}),ns])}}});export{ls as __pageData,ts as default};
