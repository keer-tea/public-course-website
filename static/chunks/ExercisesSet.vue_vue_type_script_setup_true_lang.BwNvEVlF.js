import{u as K,L as B,c as p}from"./LinkSet.DFAHLEwM.js";import{j as M,r as A,w as _,K as $,f as j,k as n,l as o,D as i,Q as v,R as S,q as m,u,E as g,s as q,y as C,V as z}from"./framework.BFFW23Ds.js";const F=["onClick"],O={class:"mt-2"},Q={key:0},R=["onClick"],T={key:0,class:"i-twemoji:star"},J=M({__name:"ExercisesSet",props:{originalData:{default:()=>[]},idName:{default:""},labelAliasList:{default:()=>[]},hightLabels:{default:()=>[]}},setup(N){const c=N,b=K();function w(e,l,t){b.visitedLinks.push({cateIndex:l,labelIndex:t})}const d=c.originalData,D=d.length;function I(e){const l=new Set;return e.forEach(t=>{const r=t.label;if(r&&r.length)if(Array.isArray(r))for(const f of r)l.add(f);else l.add(r)}),Array.from(l)}const k=I(d);function L(e){b.visitedLinks=[],a.value=e}const h=["标签分类",...c.labelAliasList.map(e=>e.labelAlias)],a=A(""),y="selectedLabel"+c.idName;_(a,()=>{localStorage.setItem(y,a.value)});const s=A(0),x="labelAliasIndexKey"+c.idName;_(s,()=>{localStorage.setItem(x,s.value)}),$(()=>{const e=localStorage.getItem(x);e&&(s.value=Number(e));const l=localStorage.getItem(y);l&&(a.value=l)});function V(e){b.visitedLinks=[],s.value=e,s.value>=h.length&&(s.value=0)}const E=j(()=>{if(s.value===0)return a.value?p(d.filter(e=>typeof e.label=="string"?a.value===e.label:Array.isArray(e.label)?e.label.includes(a.value):!1).map(e=>({...e,label:a.value}))):p(d);{const e=c.labelAliasList[s.value-1].key;return p(d.map(l=>({...l,label:l[e]})))}});return(e,l)=>(n(),o(v,null,[i("div",null,[(n(),o(v,null,S(h,(t,r)=>i("div",{class:m(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",s.value===r?"bg-#409eff text-white":"text-#606266"]),onClick:f=>V(r)},u(t),11,F)),64))]),i("div",O,"总题目数："+u(g(D)),1),s.value===0?(n(),o("div",Q,[i("div",null,"共有 "+u(g(k).length)+" 个标签",1),i("div",{class:m(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",a.value===""?"bg-#1867c0 text-white":"bg-#e3ecf7 text-#1c69c1"]),onClick:l[0]||(l[0]=t=>L(""))},"全部题目",2),i("div",null,[(n(!0),o(v,null,S(g(k),(t,r)=>(n(),o("span",{class:m(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",a.value===t?"bg-#1867c0 text-white":"bg-#e3ecf7 text-#1c69c1"]),onClick:f=>L(t)},[q(u(r+1)+"-"+u(t)+" ",1),e.hightLabels.includes(t)?(n(),o("span",T,"   ")):C("",!0)],10,R))),256))])])):C("",!0),z(B,{data:E.value,onClickLink:w},null,8,["data"])],64))}});export{J as _};
