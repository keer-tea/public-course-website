import{u as K,L as V,c as p}from"./LinkSet.C74OjypC.js";import{j as B,r as A,w as _,K as M,f as $,k as c,l as u,D as n,Q as v,R as S,q as m,u as d,E as g,y as j,V as q}from"./framework.BFFW23Ds.js";const z=["onClick"],F={class:"mt-2"},O={key:0},Q=["onClick"],H=B({__name:"ExercisesSet",props:{originalData:{default:()=>[]},idName:{default:""},labelAliasList:{default:()=>[]}},setup(C){const o=C,b=K();function N(e,l,r){b.visitedLinks.push({cateIndex:l,labelIndex:r})}const i=o.originalData,w=i.length;function I(e){const l=new Set;return e.forEach(r=>{const s=r.label;if(s&&s.length)if(Array.isArray(s))for(const f of s)l.add(f);else l.add(s)}),Array.from(l)}const k=I(i);function L(e){b.visitedLinks=[],t.value=e}const y=["标签分类",...o.labelAliasList.map(e=>e.labelAlias)],t=A(""),x="selectedLabel"+o.idName;_(t,()=>{localStorage.setItem(x,t.value)});const a=A(0),h="labelAliasIndexKey"+o.idName;_(a,()=>{localStorage.setItem(h,a.value)}),M(()=>{const e=localStorage.getItem(h);e&&(a.value=Number(e));const l=localStorage.getItem(x);l&&(t.value=l)});function D(e){b.visitedLinks=[],a.value=e,a.value>=y.length&&(a.value=0)}const E=$(()=>{if(a.value===0)return t.value?p(i.filter(e=>typeof e.label=="string"?t.value===e.label:Array.isArray(e.label)?e.label.includes(t.value):!1).map(e=>({...e,label:t.value}))):p(i);{const e=o.labelAliasList[a.value-1].key;return p(i.map(l=>({...l,label:l[e]})))}});return(e,l)=>(c(),u(v,null,[n("div",null,[(c(),u(v,null,S(y,(r,s)=>n("div",{class:m(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",a.value===s?"bg-#409eff text-white":"text-#606266"]),onClick:f=>D(s)},d(r),11,z)),64))]),n("div",F,"总题目数："+d(g(w)),1),a.value===0?(c(),u("div",O,[n("div",null,"共有 "+d(g(k).length)+" 个标签",1),n("div",{class:m(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",t.value===""?"bg-#1867c0 text-white":"bg-#e3ecf7 text-#1c69c1"]),onClick:l[0]||(l[0]=r=>L(""))},"全部题目",2),n("div",null,[(c(!0),u(v,null,S(g(k),(r,s)=>(c(),u("span",{class:m(["rounded-8px cursor-pointer px-3 py-1 inline-block mr-1 mt-1 border border-solid border-#dcdfe6",t.value===r?"bg-#1867c0 text-white":"bg-#e3ecf7 text-#1c69c1"]),onClick:f=>L(r)},d(s+1)+"-"+d(r),11,Q))),256))])])):j("",!0),q(V,{data:E.value,onClickLink:N},null,8,["data"])],64))}});export{H as _};
